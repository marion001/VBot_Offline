Dá»± Ã¡n nÃ y sá»­ dá»¥ng há»‡ thá»‘ng hai táº­p lá»‡nh Ä‘á»ƒ cÃ i Ä‘áº·t an toÃ n vÃ  Ä‘Ã¡ng tin cáº­y:

pre_check_airplay_on_pi.sh: Má»™t táº­p lá»‡nh khÃ´ng xÃ¢m pháº¡m, kiá»ƒm tra há»‡ thá»‘ng cá»§a báº¡n vá» cÃ¡c sá»± cá»‘ thÆ°á»ng gáº·p mÃ  khÃ´ng thá»±c hiá»‡n báº¥t ká»³ thay Ä‘á»•i nÃ o. Náº¿u táº¥t cáº£ cÃ¡c kiá»ƒm tra Ä‘á»u Ä‘áº¡t, nÃ³ sáº½ tá»± Ä‘á»™ng táº£i xuá»‘ng vÃ  cháº¡y trÃ¬nh cÃ i Ä‘áº·t chÃ­nh.

install_airplay_v3.sh: TrÃ¬nh cÃ i Ä‘áº·t chÃ­nh máº¡nh máº½ thá»±c hiá»‡n táº¥t cáº£ cÃ¡c hÃ nh Ä‘á»™ng cáº§n thiáº¿t Ä‘á»ƒ xÃ¢y dá»±ng vÃ  cáº¥u hÃ¬nh pháº§n má»m AirPlay 2 (Shairport-Sync vÃ  nqptp).

build láº¡i shairport:
$:> cd shairport-sync
$:> make clean
$:> autoreconf -fi
$:> ./configure --with-mqtt-client --sysconfdir=/etc --with-alsa \
    --with-soxr --with-avahi --with-ssl=openssl --with-systemd --with-airplay-2
$:> make
$:> sudo make install

$:> sudo systemctl daemon-reload
$:> sudo systemctl restart shairport-sync
$:> sudo systemctl status shairport-sync

#Táº¡m dá»«ng shairport khi Ä‘ang cháº¡y tá»± Ä‘á»™ng
$:> sudo systemctl stop shairport-sync

#báº­t táº¯t tiáº¿ng
mosquitto_pub -h localhost -t "shairport/vbot/remote" -m "mute"
mosquitto_pub -h localhost -t "shairport/vbot/remote" -m "unmute"
#Set Ã¢m lÆ°á»£ng
mosquitto_pub -t "shairport/vbot/remote" -m "volumeset 70"

Cháº¡y shairport thá»§ cÃ´ng xem logs
$:> shairport-sync -vv

ðŸ“‹ Useful commands:
   View live logs:    sudo journalctl -u shairport-sync -f
   Restart service:   sudo systemctl restart shairport-sync
   Check status:      sudo systemctl status shairport-sync
   Edit config:       sudo nano /etc/shairport-sync.conf
   Installation log:  /tmp/airplay_install_20260118_105020.log